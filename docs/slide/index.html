<!DOCTYPE html>
<html>
  <head>
    <title>Introduction to R Markdown</title>
    <meta charset="utf-8">
    <link href="index_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="index_files/remark-css-0.0.1/chocolate.css" rel="stylesheet" />
    <link href="index_files/remark-css-0.0.1/chocolate-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="addons/custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">






background-image: linear-gradient(to bottom, rgba(0,0,0,0.2) 30%, rgba(0,0,0,0.2) 100%), url(https://liao961120.github.io/slides/img/bg/coffee-blur.jpg)
background-position: center
background-size: cover

class: title-slide

.bg-text[
.larger[
# Introduction to R Markdown
]

### .s[A Tool Enabling You to Create, Write, &amp; Share Ideas]

&lt;hr /&gt;
.little-larger[
April 22, 2019  
廖永賦  
[bit.ly/fju-rmd](http://bit.ly/fju-rmd)
]
]

---




&lt;img src="img/creativity.png" width="90%" style="display: block; margin: auto 0 auto auto;" /&gt;

---

### 透過 R Markdown 分享至網路

&lt;a href='https://twlangsurvey.github.io'&gt;&lt;img src='img/twlangsurvey.gif' style='display:inline;width:48%;float:left;'&gt;&lt;/a&gt;
&lt;a href='https://rlads2017g1.github.io/presentation'&gt;&lt;img src='img/flexdashboard.gif' style='display:inline;width:50%;float:right;'&gt;&lt;/a&gt;


---

class: center, middle, inverse
background-color: black

# Part Ⅰ
# .larger[R Markdown Basics]

---

## Objectives

.larger[
1. Rmd ➜ HTML ➜ share through `URL`

1. Rmd ➜ PDF
]

&lt;img src="img/rmd_flow.png" width="1577" style="display: block; margin: auto;" /&gt;


???
接下來，我要正式進入 R Markdown 的介紹了。透過今天對 R Markdown 的介紹，我希望能達成兩個目標：

1. 第一，大家在今天結束前能夠透過 R Markdown 輸出網頁，並透過網址分享給別人。
1. 第二，大家有能力以 R Markdown 取代 Word 撰寫紙本作業或報告，並且輸出成 PDF 檔。

---






class: inverse, center, middle

# What is Markdown?

???
所以 R Markdown 是什麼？基本上，R Markdown 就是一套寫作的工具。那在了解 R Markdown 是什麼之前，我們需要先知道 Markdown 是什麼。所以我就先從一點點，關於人類寫作工具的歷史開始。

---

## 兩種媒介：紙本 vs. 網頁

---

## 兩種排版方式：WYSIWYM vs. WYSIWYG

### 標記式語言 (What You See Is What You .r[Mean], WYSIWY.r[M])

.pull-left[
#### 編輯 (純文字)

```html
這是&lt;b&gt;粗體字&lt;/b&gt;

這是&lt;i&gt;斜體字&lt;/i&gt;
```
]

.pull-right[
#### 輸出顯示

這是&lt;b&gt;粗體字&lt;/b&gt;

這是&lt;i&gt;斜體字&lt;/i&gt;
]

---

## 兩種排版方式：WYSIWYM vs. WYSIWYG

### 圖形化界面 (What You See Is What You .r[Get], WYSIWY.r[G])

.pull-left[
#### 編輯 (圖形化界面)

&lt;img src="img/medium_edit.gif" width="100%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
#### 輸出顯示

&lt;img src="img/medium_post.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

## 圖形化界面 vs. 標記式語言

|    | 圖形化界面 | 標記式語言 |
| -- | --- | --- |
| 優點 | 易學易用 | 檔案管理容易 |
| 缺點 | 檔案合併困難&lt;br&gt;檔案管理不便 | 語法過於複雜， &lt;br&gt;難以專心於寫作內容 |

--

.pull-left[
#### 檔案合併 (共編合著)

&lt;img src="img/MSword.png" width="1743" style="display: block; margin: auto;" /&gt;

「你做了什麼」被隱藏了

]

--

.pull-right[
#### 檔案管理不變

&gt; Q: 請在這 200 份**文件**中，找出所有內文含有「三年五班 王小明」的文件

- 純文字檔
    ```bash
    grep -r '三年五班 王小明' *.md
    ```
]


---
background-image: url("https://liao961120.github.io/slides/img/emo/boredom-small.png")
background-size: 100px
background-position: 90% 8%

## 標記式語言：太複雜了

&lt;img src='img/html_raw.png' style='display:inline;width:53%;align:left'&gt;
&lt;img src='img/html_rendered.png' style='display:inline;width:46%;align:right'&gt;

--

&lt;img src='https://media.giphy.com/media/fy0gLJtIkZj8I/giphy.gif' style='display:block;position:absolute;top:0%;right:0;left:auto;width:100%'&gt;

---

## Markdown: 極簡的標記式語言

&lt;img src="https://collabin.netlify.com/yongfu/write-in-rmd/md2html.png" style="display: block; margin: auto;" /&gt;


---

## 玩玩看 Markdown

Copy Markdown example [here](https://raw.githubusercontent.com/liao961120/2019-fju-rmd-talk/master/md_syntax.txt)

&lt;a href='https://jbt.github.io/markdown-editor'&gt;&lt;img src='img/markdown_demo.gif'&gt;&lt;/a&gt;

---

## Markdown: Too simplified?

### Two Solutions

1. Markdown + HTML Syntax

1. Markdown Extensions

- 優缺點？


???

#### Two Solutions
剛剛試用過 Markdown 的語法之後，你們可能會覺得 Markdown 太過於簡略，導致它無法應付需要更細緻排版的需求。Markdown 本身的語法確實無法應付這種情況，但有兩種方式可以解決這個問題。

1. 第一就是 Markdown 可以與 HTML 的語法混用。這是完全沒有問題的，因為要在網頁上顯示 Markdown，本來就會先將它轉換成 HTML 語法。

1. 第二就是擴充 Markdown 本身的語法。所以事實上，市面上有很多種 Markdown 語法在流通，各種 Markdown 之間語法上會有些微的差距。

- 優缺點

那這兩種解決 Markdown 語法過於簡略的方式，其實有各自的優缺點。第二項的缺點很明顯，就是，當一個東西有各種不同版本時，會造成使用上的麻煩。簡單來說，你無法用一致的 Markdown 語法，橫行於各個平台之上。

至於第一項，在撰寫網頁的脈絡下，並沒有什麼缺點。但是如果回到前面所說的，關於「紙本與網頁」之間的矛盾這件事上，將 Markdown 與 HTML 混用基本上就是，放棄了「紙本」而選擇了「網頁」作為發表作品的媒介。

Markdown 作為一種極簡約的標記式語言，這點讓它有潛力解決紙本與網頁之間的矛盾，因為簡單的標記式語言，可以被轉換成更複雜的標記式語言，但是反之不然。  
所以 Markdown 可以轉換成比較複雜、以**網頁呈現為目的**的 HTML；  
那既然可以轉換成 HTML，為什麼不把 Markdown 轉換成**以紙本印刷為目的**的標記式語言呢？

這正是 Pandoc 這個工具出現的原因

`--`

--

### Pandoc Markdown

- **Pandoc**: A Tool for conversion between multiple document formats
  
  - [pandoc.org/try](https://pandoc.org/try/)

- **Pandoc Markdown**: Markdown extensions by Pandoc


???

#### Pandoc Markdown
Pandoc 是一個用於「在各種標記式語言和文件格式之間」轉換的工具。  
譬如說，它可以將 Markdown 轉換成 HTML, LaTeX 和 Word 文件。Pandoc 也可以將這些格式逆向轉換成 Markdown，但就像前面所說的，這種轉換並不完美，因為複雜的標記式語言要轉換成比較簡單的標記式語言，勢必要丟掉很多無法被轉換的資訊。

至於 Pandoc Markdown 則是 Pandoc 自己定義的 Markdown 格式。它大幅的擴充 Markdown 語法，讓 Markdown 可用於撰寫排版更加精緻的文件。

---

background-image: url("img/pandoc.png")
background-size: 280px
background-position: 93% 5%

## Pandoc Markdown&lt;br&gt;.smaller[.much-smaller[.g[解決「紙本 vs. 網頁」的衝突]]]
 

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

|     | 所見即所得  | 所見即所思    |
|-----|----------|----------|
| **紙本** | MS Word | `\(\LaTeX\)`,&lt;br&gt;Markdown (近年目標)  |
| **網頁** | 部落格文章撰寫後台&lt;br&gt;(e.g. WordPress, Medium) | HTML,&lt;br&gt;Markdown (初創目的) |


???
更重要的是，Pandoc Markdown 多數的語法能夠同時完美地轉換成 HTML 和 LaTeX 這兩種標記式語言。這基本上解決了「網頁與紙本的矛盾」，因為寫作者可以只用 Pandoc Markdown 撰寫文件，需要**發布在網路**上時就將文件輸出成 HTML，需要**列印**時就將文件輸出成 LaTeX 再生成 PDF。

這個表格比較了幾種常見的排版工具的特性。我這邊總結一下。我認為 Markdown 是這些工具之中最好的排版工具，原因有兩點：

1. 第一，做為一種「所見即所思」的排版工具，Markdown 沒有其它圖形化界面排版工具的缺點。同時，由於 Markdown 是非常簡約的標記式語言，它不像過去惡名昭彰的標記式語言擁有太過複雜的語法，干擾人們寫作的過程。
1. 第二，使用 Markdown 可以解決紙本和網頁的矛盾

---

## Markdown Extentions by Pandoc .ms[(Partial)]

- Footnotes

- [Bibliographies and Citations](https://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html)
    - [Citation Style Language (`.csl`)](https://citationstyles.org)

- Math Expressions:
  
  - 
  ```latex
  e^{ \frac{ -(x - \mu)^2 }{2 \sigma} }
  ```
  
  - Wrap LaTeX math code in a pair of `$` or `$$`:
  
      - `output: `\(e^{ \frac{ -(x - \mu)^2 }{2 \sigma} }\)``  
      - output: `\(e^{ \frac{ -(x - \mu)^2 }{2 \sigma} }\)`

.footnote[
[1]: [R Markdown's Markdown Syntax](https://bookdown.org/yihui/rmarkdown/markdown-syntax.html) (Pandoc Markdown)

[2]: [Markdown extensions by bookdown](https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html)

]


???

那這邊列出了一小部份 Pandoc Markdown 所提供的語法，  
譬如說，它提供了「註解」的語法、  
自動插入引用文獻的語法 (那這個功能對於學術報告的撰寫很重要)、  
另外，還有提供 LaTeX 撰寫數學公式的語法 (基本上，我覺得 LaTeX 這套標記式語言太過複雜，沒什麼好處。那我能想到它唯一的好處，就是它撰寫數學公式非常的方便。舉個例子來說，你要用 Word 打出常態分配的公式，需要花上多少時間？那這對 LaTeX 來說，如果你熟悉它撰寫數學的邏輯的話，其實很快。)

這邊之所以會提到 Pandoc Markdown 的原因是因為，  
R Markdown 所使用的 Markdown 語法其實就是 Pandoc Markdown。  
那投影片下方的第一個連結是 Pandoc Markdown 的語法簡介。  
第二個連結是，等一下會介紹的，一個擴充 R Markdown 的套件，所增加的 Markdown 語法

---






class: inverse, center, middle

# Components of R Markdown

---

## What is R Markdown?


.center[.much-larger[
&lt;code&gt;
R Markdown = knit**.r[r]**  +  Pandoc **.r[Markdown]**
&lt;/code&gt;
]]

--

&lt;br&gt;

.larger[
- **`knitr`**: A tool for embedding R code &amp; execution results into a Markdown document.
]


---

## Structure of an R Markdown Document




.right-column[
````md
---
title: A minimal R Markdown Document
author: John Doe
output: bookdown::html_document2
---

# Markdown

I'm writing with *Markdown syntax*.

```{r}
today &lt;- Sys.Date()
paste('Using R Markdown on', today)
```

## Inline R Code

Variables computed in code chunks can be placed inline: `r today`
````
]



---

## Structure of an R Markdown Document

.left-column[
### .little-smaller[YAML Frontmatter&lt;br&gt;(metadata)]
]

.right-column[
````md
*---
*title: A minimal R Markdown Document
*author: John Doe
*output: bookdown::html_document2
*---

# Markdown

I'm writing with *Markdown syntax*.

```{r}
today &lt;- Sys.Date()
paste('Using R Markdown on', today)
```

## Inline R Code

Variables computed in code chunks can be placed inline: `r today`
````
]

---

## Structure of an R Markdown Document

.left-column[
### .little-smaller[YAML Frontmatter&lt;br&gt;(metadata)]
### Markdown
]

.right-column[
````md
---
title: A minimal R Markdown Document
author: John Doe
output: bookdown::html_document2
---

*# Markdown
*
*I'm writing with *Markdown syntax*.

```{r}
today &lt;- Sys.Date()
paste('Using R Markdown on', today)
```

*## Inline R Code
*
*Variables computed in code chunks can be placed inline: `r today`
````
]

---

## Structure of an R Markdown Document

.left-column[
### .little-smaller[YAML Frontmatter&lt;br&gt;(metadata)]
### Markdown
### .little-smaller[knitr Code Chunks&lt;br&gt;(Executable)]
]

.right-column[


&lt;pre&gt;&lt;code class="md hljs markdown remark-code"&gt;---
title: A minimal R Markdown Document
author: John Doe
output: bookdown::html_document2
---

# Markdown

I'm writing with *Markdown syntax*.

&lt;div class="remark-code-line remark-code-line-highlighted"&gt;```{r}&lt;/div&gt;
&lt;div class="remark-code-line remark-code-line-highlighted"&gt;today &lt;- Sys.Date()&lt;/div&gt;
&lt;div class="remark-code-line remark-code-line-highlighted"&gt;paste('Using R Markdown on', today)&lt;/div&gt;
&lt;div class="remark-code-line remark-code-line-highlighted"&gt;```&lt;/div&gt;

&lt;div class="remark-code-line"&gt;&lt;span class="hljs-section"&gt;## Inline R Code&lt;/span&gt;&lt;/div&gt;

&lt;div class="remark-code-line"&gt;Variables computed in code chunks can be placed inline: &lt;span class="remark-code-span-highlighted"&gt;`r today`&lt;/span&gt;&lt;/div&gt;
&lt;/code&gt;&lt;/pre&gt;
]

---



## 3 種 Code Chunks

1. Markdown (不會執行)
  ````Rmd
*```r
print("This will NOT be printed!")
```
````

1. knitr Code Chunk (Executable)
  ````Rmd
*```{r}
print("This will be printed!")
```
````

1. Inline R Code Chunk (Executable)

  &lt;code class='hljs Rmd'&gt;
  &amp;#96;r "This will be printed!"&amp;#96;
  &lt;/code&gt;


---

## knitr Code Chunk

.left-column[
### Chunk Options
]

.right-column[



````Rmd
```{r chunk-label, echo=FALSE, dev="png"}
x &lt;- 1 + 1
```
````

- `echo`: show R source code?

- `eval`: Run code chunk?

- `include`: include the chunk output in the final output document?

- `out.width='90%'`: 輸出圖片佔 90% 頁面寬度

]

.footnote[.little-larger[
[`knitr` 說明文件](https://yihui.name/knitr/options/)
]]

---

## knitr Code Chunk

.left-column[
### Chunk Options
]

.right-column[



#### Global Chunk options

````Rmd
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```
````
      
&lt;img src="img/global_chunk_opts.gif" width="95%" style="display: block; margin: auto;" /&gt;

]

---

## knitr Code Chunk

.left-column[
### Chunk Options
### .little-smaller[例: 統計圖]
]

.right-column[

輸出**統計圖**，並

1. 隱藏原始碼: `echo=FALSE`
1. 調整圖片寬度：`out.width="35%"`
1. 調整圖片比例 (寬:高 = 6:4)：`fig.dim=c(6, 4)`



````Rmd
```{r iris-plot, echo=FALSE, out.width="35%", fig.dim=c(7, 3.5)}
library(ggplot2)
ggplot(data = iris) +
  geom_point(aes(Sepal.Length, Petal.Width, color = Species))
```
````
]

--

.right-column[
**Output:**

&lt;img src="index_files/figure-html/unnamed-chunk-22-1.png" width="35%" style="display: block; margin: auto;" /&gt;
]

---

## knitr Code Chunk

.left-column[
### Chunk Options
### .little-smaller[例: 統計圖]
### .little-smaller[例: 表格]
]

.right-column[
將 `data.frame` 輸出成**表格**



````Rmd
```{r echo=FALSE}
data &lt;- iris[1:5, 1:3]
knitr::kable(data, align = "c", format = "markdown",
             caption = "表格說明文字"
```
````
]

--

.right-column[
**Output:**


| Sepal.Length | Sepal.Width | Petal.Length |
|:------------:|:-----------:|:------------:|
|     5.1      |     3.5     |     1.4      |
|     4.9      |     3.0     |     1.4      |
|     4.7      |     3.2     |     1.3      |
|     4.6      |     3.1     |     1.5      |
|     5.0      |     3.6     |     1.4      |

]


---

## knitr Code Chunk

.left-column[
### Chunk Options
### .little-smaller[例: 統計圖]
### .little-smaller[例: 表格]
### .little-smaller[例: 外部圖片]
]

.right-column[

使用**外部**，而非 R 所產生之圖片




````Rmd
```{r world, echo=TRUE, out.width="38%", fig.cap="圖片說明文字"}
knitr::include_graphics("img/world_night.jpg")
```
````
]

--

.right-column[
**Output:**


```r
knitr::include_graphics('img/world_night.jpg')
```

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="img/world_night.jpg" alt="圖片說明文字" width="38%" /&gt;
&lt;p class="caption"&gt;圖片說明文字&lt;/p&gt;
&lt;/div&gt;

]

---

## knitr Code Chunk

.left-column[
### Chunk Options
### .little-smaller[例: 統計圖]
### .little-smaller[例: 表格]
### .little-smaller[例: 外部圖片]
]

.right-column[

#### .larger[相對路徑 vs. 絕對路徑]

- Current Working Directory：**`.Rmd` 所在的資料夾**

- **盡量使用相對路徑**：外部檔案路徑都是.r[**相對 `.Rmd` 而言**]

    ```yml
    slide.Rmd 所在之資料夾/
    │
    ├── slide.Rmd
    └── img/
    *    └── world_night.jpg
    ```

```r
include_graphics('img/world_night.jpg')            # Good

include_graphics('img\\world_night.jpg')           # Bad !!!
include_graphics('C:/.../img/world_night.jpg')     # Bad !!!
include_graphics('C:\\...\\img\\world_night.jpg')  # Worst !!!
```
]

???
Windows 的檔案路徑是用反斜線 (`\`) 表示分隔，但所有非 Windows 的電腦是用正斜線表示。在 R 當中使用正協線表示路徑能在所有作業系統下運行。

---

## knitr Code Chunk

.left-column[
### Chunk Options
### .little-smaller[例: 統計圖]
### .little-smaller[例: 表格]
### .little-smaller[例: 外部圖片]
### Your Turn
]

.right-column[

#### .larger[練習時間]

1. 下載 [`code_chunk_prac.zip`](https://liao961120.github.io/2019-fju-rmd-talk/code_chunk_prac.zip)

1. 修改 `code_chunk_prac.Rmd` 中的內容，  
使輸出&lt;sup&gt;\*&lt;/sup&gt;結果與[此網頁](https://bit.ly/2FUQPvP)相同

1. 參考答案寫在 `code_chunk_prac_solu.Rmd`

]


.footnote[
[\*]: 以 RStudio 開啟 `.Rmd` ➜ 點擊 &lt;img src='img/knitr.png' style='display:inline;height:1em;'&gt; (`Knit`) or  
`rmarkdown::render('path/to/code_chunk_prac.Rmd')`
]
---

## YAML Frontmatter

.pull-left[
#### Pandoc 模板變項
    
```yml
title: 'A title'
date: 'r Sys.Date()'
author: 'Somebody'
bibliography: ref.bib
csl: apa.csl
```

&lt;br&gt;

- 不同格式 (模板)，可供設定之變項不盡相同
    - `geometry`, `linestretch` 僅對於 PDF 輸出的文件有效果

- 可用**動態變項** (inline R Code) 作為輸入
    - 今天是 &amp;#96;&lt;code&gt;r Sys.Date()&lt;/code&gt;&amp;#96;  
    今天是 2019-04-12
]

--

.pull-right[
#### 輸出格式
    
```yml
output:
  bookdown::html_document2:
    toc: yes
    number_sections: no
  bookdown::pdf_document2:
    toc: yes
    number_sections: no
```

&lt;br&gt;

- **.r[縮排]**結構必須一致: 每層皆使用 **2 格空白**

- 可同時設定多個輸出格式  
![:scale 65%](img/knit_multiple.gif)


]

---

## YAML 好複雜？

.center[.larger[
沒錯，不要去記它，.r[**複製貼上就好**]
]]

&lt;br&gt;

- 輸出 HTML 文件 ([檢視](https://github.com/liao961120/2019-fju-rmd-talk/blob/master/minimal_html), [下載](https://minhaskamal.github.io/DownGit/#/home?url=https://github.com/liao961120/2019-fju-rmd-talk/tree/master/minimal_html))

- 輸出 PDF 文件 ([檢視](https://github.com/liao961120/2019-fju-rmd-talk/tree/master/minimal_pdf), [下載](https://liao961120.github.io/2019-fju-rmd-talk/minimal_pdf.zip))


---






class: inverse, center, middle

# Hosting HTML Files on Web

---

## Updog

&lt;img src='img/updog.gif' style='float:right;width:65%;margin-right:-50px'&gt;

#### 註冊 Updog

1. Visit [updog.co](https://updog.co/)
1. `Get Started`
1. `Sign in with Google / Dropbox`
1. 輸入 `site name`

--

#### R Markdown ➜ HTML ➜ Updog 網頁

1. 下載 [`minimal_html`](https://minhaskamal.github.io/DownGit/#/home?url=https://github.com/liao961120/2019-fju-rmd-talk/tree/master/minimal_html)

1. RStudio:   
.smaller[`html_article.Rmd` ➜ `html_article.html`]

1. 將 `html_article.html` 上傳至  
雲端硬碟: `Updog/&lt;site-name&gt;`

1. 等 30 秒左右，就可以在  
.smaller[[https://`&lt;site-name&gt;`.updog.co/html_article.html]()]  
看到輸出的 HTML 了



---


## [GitHub](https://github.com) &lt;img src='img/GitHub-Mark.png' style='display:inline;width:0.7em;'&gt; (A Better Option)


&lt;img src='https://octodex.github.com/images/vinyltocat.png' style='float:right;width:42%'&gt;

- 原始碼版本控制 (備份)、專案規劃與管理、合作開發
    - 轉個彎之後 ...  
    [寫論文](https://github.com/sih4sing5hong5/huan1-ik8_lun7-bun5)、[課程管理](https://happygitwithr.com/classroom-overview.html)

- 許多軟體開發相關的實用、免費服務

- 架設網頁

- &lt;s&gt;世界最大男性社交網站&lt;/s&gt;


.footnote[
[透過 GitHub 架設靜態網頁](https://liao961120.github.io/2018/04/20/gsheet_survey.html#靜態網頁-設置)  
學習資源：[Happy Git and GitHub for the useR](https://happygitwithr.com)
]

---






class: inverse, center, middle

# 輸出 PDF 文件

---

background-color: black
background-image: url("img/thanos.gif"), linear-gradient(to bottom, rgba(0,0,0, 1) 100%, rgba(0,0,0, 1) 100%)
background-size: contain, 100% 100%, cover

---

## 一條崎嶇的道路

.center[.much-larger[
`.Rmd` ➜ knitr ➜ `.md` ➜ Pandoc ➜ `.tex` ➜
`\(\color{red}{\LaTeX}\)` ➜ `.pdf`
]]

- 安裝 `\(\LaTeX\)`

- 麻煩的中文字 (xelatex, 字體檔)

--

- 2018 之後的人生比較輕鬆

&lt;img src='https://d33wubrfki0l68.cloudfront.net/15c2850da53a2f8d8a1a30aa003bda21155e16ec/db869/images/logo-tinytex.png' style='display:inline;float:right;width:10em;padding-right:70px;'&gt;

---

## 安裝 tinytex (TinyTeX)

.pull-left[

1. .s[(**Windows 7/10**)] 下載並解壓縮 TinyTeX:  
.s[[TinyTeX-win10.7z](http://bit.ly/TinyTeX-win10-7z) (72 MB) 或   
[TinyTeX-win10.zip](http://bit.ly/TinyTeX-win10-zip) (108 MB)]

2. 
```r
install.packages('tinytex')
tinytex::use_tinytex()
```

3. 選取解壓縮後的 `TinyTeX` 資料夾&lt;sup&gt;＊&lt;/sup&gt;

4. .s[(多試幾次)] 關閉再重新打開 RStudio，輸入

  ```r
  tinytex:::tinytex_root()
  #&gt; if failed, i.e returning: [1] ""
  #&gt; then try again
  ```
]

.footnote[.s[
[＊]: 解壓縮之後，如果有兩個 `TinyTeX` 資料夾，選擇**內層**的那個。
]]

--

.pull-right[
1. .s[(**Mac** .ms[or] 步驟 4. 失敗)] 直接安裝 TinyTeX
  
  ```r
  install.packages('tinytex')
  tinytex::install_tinytex()
  ```

- 這種方式比較耗費時間

    - 參考 [Using TinyTeX from a Flash Drive](https://yihui.name/en/2018/08/tinytex-flash-drive) 打包 TinyTeX
.s[(左欄方式)]

]

???
如果不想每次用新電腦都重新安裝一次，可以參考這篇文章，說明將 TinyTeX 儲存於隨身碟

---

## 小心設定 .s[(因為中文字)]

.pull-left[

#### YAML Frontmatter

```yaml
title: "YAML for PDF Document"
author: "廖永賦\\thanks{作者資訊}"
documentclass: article
geometry: a4paper
linestretch: 1.35
links-as-notes: true
output:
  bookdown::pdf_document2:
*   latex_engine: xelatex
    number_sections: no
    toc: no
*   includes:
*     in_header: header.tex
```
]

--

.pull-right[
#### `header.tex`

```tex
*\usepackage{fontspec}
*\usepackage{xeCJK}
\usepackage{float}
\usepackage[fontsize=12pt]{scrextend}
\setlength{\parskip}{0.35cm}

*\setCJKmainfont{標楷體}
*\setCJKmonofont{Noto Sans Mono CJK TC}
*\XeTeXlinebreaklocale "zh"
*\XeTeXlinebreakskip = 0pt plus 1pt

\renewcommand{\figurename}{圖}
\renewcommand{\tablename}{表}
\renewcommand{\contentsname}{目錄}
\renewcommand{\listfigurename}{圖目錄}
\renewcommand{\listtablename}{表目錄}
\renewcommand{\appendixname}{附錄}
\renewcommand{\abstractname}{摘要}

\renewcommand{\textfraction}{0.05}
\renewcommand{\topfraction}{0.8}
\renewcommand{\bottomfraction}{0.8}
\renewcommand{\floatpagefraction}{0.75}
```
]

---

## 更簡單的方式：.s[R Markdown .s[模板]]

.pull-left[
#### 1. 安裝 `rmdtk`

```r
install.packages('remotes')
remotes::install_github('liao961120/rmdtk')
rmdtk::download_fonts()
```

#### 2. 匯入模板


##### 指令
```r
rmarkdown::draft('my_new_doc',
  template = 'CJKdocument', package = 'rmdtk')
```


##### RStuido GUI .ms[(見右)]:

.ms[File → New File → R Markdown → From Template → **Portable CJK Document for HTML &amp; PDF**] 

]

&lt;img src='img/import_template.gif' style='display:block;position:absolute;top:28%;right:-30px;width:55%'&gt;

---

background-image: linear-gradient(to bottom, rgba(255,255,255,0.4) 0%, rgba(255,255,255,0.4) 100%), url("https://bit.ly/2VCakjd")
background-position: center
background-size: contain, 100% 100%, cover


.footnote[
.ml[.ml[
**接著就可以 ![:scale 1.1em](img/knitr.png) `.Rmd` 了**]]
]

---

class: center, middle, inverse
background-color: black

# Part Ⅱ
# .l[Applications &lt;br&gt;.s[.ms[(Advanced Topics)]]]

---








## Objectives


- 純概念、不實際操作

- 放輕鬆

- 學習資源

--

&lt;img src='img/jump-off.gif' style='display:block;position:absolute;left:25%;top:32%;width:75%'&gt;



---

class: inverse, center, middle

# Advanced Topic: &lt;br&gt;.s[Bibliographies &amp; Citations]

---

## Bibliographies &amp; Citations

.pull-left[

#### .l[Prerequisites]

1. BibTeX: `ref.bib` .ms[(1 entry)]

    &lt;pre&gt;&lt;code class='bib hljs nix remark-code'&gt;@article{&lt;span class="remark-code-span-highlighted"&gt;leung2008&lt;/span&gt;,
      title = {Multicultural Experience Enhances Creativity},
      year = {2008},
      journal = {American Psychologist},
      author = {Leung, Angela Ka-yee and Maddux, William W.},
    }
    &lt;/code&gt;&lt;/pre&gt;

1. 文獻引用格式: `apa.csl`

  .s[下載：[Official CSL Repo](https://github.com/citation-style-language/styles), [Zotero Style Repo](https://www.zotero.org/styles)]
]


--

.pull-right[

#### .l[Workflow]

1. **書目管理軟體**整理文獻  
.s[
(推薦 [Zotero](https://www.zotero.org) + [Better BibTeX extension](https://retorque.re/zotero-better-bibtex)&lt;sup&gt;＊&lt;/sup&gt;)
]

1. 透過**書目管理軟體**匯出 `.bib` 檔

1. 使用 [Citation Syntax](https://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html#citation_syntax) 插入引用文獻  
(or 使用 [`citr` 套件](https://github.com/crsh/citr) 幫助你)
    
  &lt;pre&gt;&lt;code class='md hljs markdown remark-code'&gt;Leung says blah blah &lt;span class="remark-code-span-highlighted"&gt;[-@leung2008]&lt;/span&gt;.
  &lt;/code&gt;&lt;/pre&gt;

.footnote[.s[
[.s[＊]]: .s[(就我所知)] Zotero 是目前唯二[可控制 `.bib` 檔之 citekey pattern](https://retorque.re/zotero-better-bibtex/citation-keys) 的免費書目管理軟體。

[Zotero + R Markdown Tutorial](https://ikashnitsky.github.io/2019/zotero)
]]

]

---

## Bibliographies &amp; Citations .ms[(Cont.)]

### Two Systems .ms[(again)]

.pull-left[

- [Pandoc citeproc](https://github.com/jgm/pandoc-citeproc)
    - Support: HTML &amp; PDF (LaTeX)
    
    - YAML Frontmatter
    
    ```yml
    *bibliography: ref.bib
    *csl: apa.csl
    output: bookdown::html_document2
    ```
]

.pull-right[
- `\(\LaTeX\)` citation package (`biblatex` or `natbib`)
    - Support: PDF (LaTeX) only
    
    - YAML Frontmatter  
    
    ```yml
    *bibliography: ref.bib
    output:
      bookdown::pdf_document2:
    *   citation_package: natbib
    ```
]

---

class: inverse, center, middle

# R Markdown Ecosystem

---

background-image: url(https://bookdown.org/yihui/bookdown/images/cover.jpg)
background-size: 20%
background-position: 85% 40%

## 書籍撰寫 (bookdown)

- [bookdown book](https://bookdown.org/yihui/bookdown) ([PDF](https://bookdown.org/yihui/bookdown/bookdown.pdf)): 學習 R Markdown 的好資源

--

- 同時輸出 [GitBook](https://www.gitbook.com) 與 PDF Book
    - 可以拿來[寫論文](https://github.com/liao961120/ntuthesis)

&lt;br&gt;

![:scale 60%](img/gitbook.png)
---

background-image: url(img/twlangsurvey.gif)
background-size: 65%
background-position: 91% 88%

## 網站: [R Markdown Websites](https://bookdown.org/yihui/rmarkdown/rmarkdown-site.html)

- 適合製作**簡單**網站

  - 單頁 .s[or] 少量頁面


.footnote[.ms[
&lt;https://twlangsurvey.github.io&gt;
]]

---

background-image: url(https://bookdown.org/yihui/blogdown/images/logo.png)
background-position: 80% 20%

## 部落格 (blogdown)

- [blogdown book](https://bookdown.org/yihui/blogdown) ([PDF](https://bookdown.org/yihui/blogdown/blogdown.pdf))
  

- Why start a blog?

--

- 架站太難？

  .s[不會架站，也能[體驗用 R Markdown 寫部落格](https://collabin.netlify.com/info/about)]

???
Why Start a blog?
- 整理、記錄自己做過什麼
- 從寫作當中學習


&lt;!-- Ending --&gt;

---

background-image: url(https://liao961120.github.io/slides/img/pictures/cabin.jpg)
background-position: center
background-size: cover

class: center, inverse

--

# .l[Thank You]

---

background-image: linear-gradient(to bottom, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.8) 100%), url(https://liao961120.github.io/slides/img/pictures/cabin.jpg)
background-position: center
background-size: cover

&lt;img src='https://liao961120.github.io/img/icon-trans-sbg.png' style='display:block;position:absolute;left:70%;top:43%;width:20%'&gt;

&lt;br&gt;&lt;br&gt;&lt;br&gt;

# Contact Info

.larger[
**Yongfu Liao**

- &lt;https://liao961120.github.io&gt;

- ![:scale 1em](img/GitHub-Mark.png) [liao961120](https://github.com/liao961120)

]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="addons/macros.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:10",
"highlightStyle": "github",
"highlightSpans": false,
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
